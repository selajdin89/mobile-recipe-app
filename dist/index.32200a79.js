const mealsEl=document.querySelector(".lower-block"),favContainer=document.getElementById("favourite"),heartBtn=document.querySelector(".heart-btn"),searchEL=document.getElementById("search-term"),searchBtn=document.getElementById("search"),closePopup=document.querySelector(".close-btn"),mealInfoEl=document.querySelector(".meal-info"),mealPopup=document.querySelector(".popup-container"),searchElement=document.querySelector(".search-form"),popupContainer=document.querySelector(".popup-info"),getRandomMeal=async function(){const e=await fetch("https://www.themealdb.com/api/json/v1/1/random.php"),n=(await e.json()).meals[0];console.log(n),addMeal(n,!0)};async function getMealById(e){const n=await fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${e}`),t=await n.json();console.log(t);const a=t.meals[0];return console.log(a),a}getRandomMeal(),fetchFavMeals();const getMealByName=async function(e){const n=await fetch(`https://www.themealdb.com/api/json/v1/1/search.php?s=${e}`);return(await n.json()).meals};function addMeal(e,n=!1){const t=document.createElement("div");t.classList.add("meal"),t.innerHTML=`\n  <div class="meal">\n    <div class="random-recipe">\n  ${n?'<h3 class="random">Random Recipe</h3>':""}\n          \n          <img\n            src="${e.strMealThumb}"\n            alt="${e.strMeal}"\n          />\n        </div>\n\n        <footer class="footer">\n          <h3>${e.strMeal}</h3>\n          <button class="heart-btn">\n            <i class="fas fa-heart"></i>\n          </button>\n          \n        </footer>\n        </div>    \n  `,mealsEl.appendChild(t);const a=t.querySelector(".random-recipe"),o=t.querySelector(".heart-btn");o.addEventListener("click",(function(n){o&&(o.classList.contains("active")?(removeMealLS(e.idMeal),o.classList.remove("active")):(addMealTolS(e.idMeal),o.classList.add("active")),fetchFavMeals(),a.addEventListener("click",(function(){showMealInfo(e)})))}))}function getMealsFromLS(){const e=JSON.parse(localStorage.getItem("mealIds"));return null===e?[]:e}function addMealTolS(e){const n=getMealsFromLS();console.log(n),localStorage.setItem("mealIds",JSON.stringify([...n,e]))}function removeMealLS(e){const n=getMealsFromLS();console.log(n),localStorage.setItem("mealIds",JSON.stringify(n.filter((n=>n!==e))))}function addFavMeal(e){const n=document.createElement("li");n.innerHTML=`\n  \n    <img class="fav-meal"\n      src="${e.strMealThumb}"\n      alt="${e.strMeal}"\n    /><span>${e.strMeal}</span>\n    <button class="clear"><i class="fa-solid fa-rectangle-xmark"></i></button>\n  `;n.querySelector(".clear").addEventListener("click",(function(){removeMealLS(e.idMeal),fetchFavMeals()})),n.addEventListener("click",(function(n){n.target.closest(".fav-meal")&&showMealInfo(e)})),favContainer.appendChild(n)}async function fetchFavMeals(){favContainer.innerHTML="";const e=getMealsFromLS();console.log(e);for(let n=0;n<e.length;n++){const t=e[n];addFavMeal(await getMealById(t))}}function showMealInfo(e){mealInfoEl.innerHTML="";const n=document.createElement("div"),t=[];for(let n=1;n<=20&&e["strIngredient"+n];n++)t.push(`${e["strIngredient"+n]} - ${e["strMeasure"+n]}`);n.innerHTML=`\n          <h2>${e.strMeal}</h2>\n          <img\n            src="${e.strMealThumb}"\n            alt=""\n          />\n          <p>\n            ${e.strInstructions}\n          </p>\n          <h3>ingredients:</h3>\n          <ul>\n              ${t.map((e=>`<li>${e}</li>`)).join("")}\n              \n          </ul>\n        `,mealInfoEl.appendChild(n),mealPopup.classList.remove("hidden")}searchElement.addEventListener("submit",(async function(e){e.preventDefault(),mealsEl.innerHTML="";const n=searchEL.value,t=await getMealByName(n);t&&t.forEach((e=>{addMeal(e),searchEL.value=""}))})),popupContainer.addEventListener("click",(function(e){e.target.closest(".close-popup")&&mealPopup.classList.add("hidden")}));
//# sourceMappingURL=index.32200a79.js.map
