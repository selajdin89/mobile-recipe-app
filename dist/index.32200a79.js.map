{"mappings":"AAAA,MAAMA,QAAUC,SAASC,cAAc,gBACjCC,aAAeF,SAASG,eAAe,aACvCC,SAAWJ,SAASC,cAAc,cAClCI,SAAWL,SAASG,eAAe,eACnCG,UAAYN,SAASG,eAAe,UACpCI,WAAaP,SAASC,cAAc,cACpCO,WAAaR,SAASC,cAAc,cACpCQ,UAAYT,SAASC,cAAc,oBACnCS,cAAgBV,SAASC,cAAc,gBACvCU,eAAiBX,SAASC,cAAc,eAExCW,cAAgBC,iBACpB,MAAMC,QAAiBC,MACrB,sDAGIC,SADaF,EAASG,QACJC,MAAM,GAC9BC,QAAQC,IAAIJ,GAEZK,QAAQL,GAAY,E,EAOtBH,eAAeS,YAAYC,GACzB,MAAMT,QAAiBC,MACrB,wDAAwDQ,KAGpDC,QAAaV,EAASG,OAC5BE,QAAQC,IAAII,GACZ,MAAMC,EAAWD,EAAKN,MAAM,GAG5B,OAFAC,QAAQC,IAAIK,GAELA,C,CAdTb,gBAEAc,gBAeA,MAAMC,cAAgBd,eAAgBe,GACpC,MAAMd,QAAiBC,MACrB,wDAAwDa,KAM1D,aAJmBd,EAASG,QAETC,K,EAKrB,SAASG,QAAQI,EAAUI,GAAS,GAClC,MAAMC,EAAO9B,SAAS+B,cAAc,OACpCD,EAAKE,UAAUC,IAAI,QAEnBH,EAAKI,UAAY,8DAwBjBL,EAAA,wCAA4B,oDAIjBJ,EAAAU,mCACLV,EAAkBW,4FAMpBX,EAAaW,2KAenBrC,QAASsC,YAAcP,GAGrB,MAAAQ,EAAuBR,EAAK7B,cAAW,kBACxCsC,EAAAT,EAAA7B,cAAA,cAEDsC,EAAAC,iBAAqB,SAAQ,SAAAC,GACrBF,IACEA,EAAIP,UAASU,SAAA,WAErBC,aAAqBlB,EAASmB,QAAqBL,EAAAP,UAAOa,OAAA,YAAYC,YAAArB,EAAAmB,QACvEL,EAAAP,UAAAC,IAAA,WAGCP,gBACAY,EAAoBE,iBAAC,oBAErBO,aACEtB,EAGH,IAED,G,UAGEuB,iBASA,MAAMC,EAAMC,KAASC,MAAAC,aAAcC,QAAU,YAE7C,OAAI,OAAAJ,EAAiB,GAASA,C,UAG5BH,YAAaQ,G,MACZL,EAAAD,iBAEH7B,QAAQC,IAAC6B,G,aACEM,QAAK,UAAcL,KAACM,UAAa,IAE1CP,EACAK,I,UAIHX,aAAAW,GAED,MAAAL,EAAeD,iBACb7B,QAAAC,IAAY6B,GACZG,aAAaG,QAAG,UAAgBL,KAACM,UAAAP,EAAAQ,QAAAlC,OAAA+B,K,UAEjCI,WAAAjC,GAEA,MAAKkC,EAAY3D,SAAU+B,cAAc,M,EACvCG,UAAe,+CAKhBT,EAAAU,6BACFV,EAAAW,yBAEQX,EAAaW,qGAKduB,EAAc1D,cAAG,UAElBuC,iBAAgB,SAAS,WAC5BG,aAAalB,EAAAmB,Q,mBASfe,EAAOnB,iBAAa,kBACNC,GAeHA,EAAAmB,OAAYC,QAAQ,cAGhCd,aAAAtB,EAED,IACEvB,aAAEmC,YAAiBsB,E,gBAGXjC,gBAERxB,aAAWgC,UAAY,GAEvB,MAAMe,EAAQD,iBAEd7B,QAAIC,IACF6B,G,IAEE,IAAAa,EAAQ,EAACA,EAAKb,EAAMc,OAAAD,IAAA,CACnB,MAAAR,EAAAL,EAAAa,GAIPJ,iBAFGpC,YAAAgC,GAGD,C,UAIAP,aAAUtB,GACTjB,WAAA0B,UAAA,G","sources":["script.js"],"sourcesContent":["const mealsEl = document.querySelector(\".lower-block\");\r\nconst favContainer = document.getElementById(\"favourite\");\r\nconst heartBtn = document.querySelector(\".heart-btn\");\r\nconst searchEL = document.getElementById(\"search-term\");\r\nconst searchBtn = document.getElementById(\"search\");\r\nconst closePopup = document.querySelector(\".close-btn\");\r\nconst mealInfoEl = document.querySelector(\".meal-info\");\r\nconst mealPopup = document.querySelector(\".popup-container\");\r\nconst searchElement = document.querySelector(\".search-form\");\r\nconst popupContainer = document.querySelector(\".popup-info\");\r\n\r\nconst getRandomMeal = async function () {\r\n  const response = await fetch(\r\n    \"https://www.themealdb.com/api/json/v1/1/random.php\"\r\n  );\r\n  const data = await response.json();\r\n  const randomData = data.meals[0];\r\n  console.log(randomData);\r\n\r\n  addMeal(randomData, true);\r\n};\r\n\r\ngetRandomMeal();\r\n\r\nfetchFavMeals();\r\n\r\nasync function getMealById(id) {\r\n  const response = await fetch(\r\n    `https://www.themealdb.com/api/json/v1/1/lookup.php?i=${id}`\r\n  );\r\n\r\n  const data = await response.json();\r\n  console.log(data);\r\n  const mealData = data.meals[0];\r\n  console.log(mealData);\r\n\r\n  return mealData;\r\n}\r\n\r\nconst getMealByName = async function (name) {\r\n  const response = await fetch(\r\n    `https://www.themealdb.com/api/json/v1/1/search.php?s=${name}`\r\n  );\r\n  const data = await response.json();\r\n\r\n  const meals = data.meals;\r\n\r\n  return meals;\r\n};\r\n\r\nfunction addMeal(mealData, random = false) {\r\n  const meal = document.createElement(\"div\");\r\n  meal.classList.add(\"meal\");\r\n\r\n  meal.innerHTML = `\r\n  <div class=\"meal\">\r\n    <div class=\"random-recipe\">\r\n  ${random ? '<h3 class=\"random\">Random Recipe</h3>' : \"\"}\r\n          \r\n          <img\r\n            src=\"${mealData.strMealThumb}\"\r\n            alt=\"${mealData.strMeal}\"\r\n          />\r\n        </div>\r\n\r\n        <footer class=\"footer\">\r\n          <h3>${mealData.strMeal}</h3>\r\n          <button class=\"heart-btn\">\r\n            <i class=\"fas fa-heart\"></i>\r\n          </button>\r\n          \r\n        </footer>\r\n        </div>    \r\n  `;\r\n\r\n  // const btn = meal.querySelector('.heart-btn');\r\n\r\n  // meal.addEventListener('click', function () {\r\n  //   showMealInfo(mealData);\r\n  // });\r\n\r\n  mealsEl.appendChild(meal);\r\n  // let btn;\r\n  const btnShowMealInfo = meal.querySelector(\".random-recipe\");\r\n  const btn = meal.querySelector(\".heart-btn\");\r\n  btn.addEventListener(\"click\", function (e) {\r\n    if (!btn) return;\r\n\r\n    if (btn.classList.contains(\"active\")) {\r\n      removeMealLS(mealData.idMeal);\r\n      btn.classList.remove(\"active\");\r\n    } else {\r\n      addMealTolS(mealData.idMeal);\r\n      btn.classList.add(\"active\");\r\n    }\r\n\r\n    fetchFavMeals();\r\n\r\n    btnShowMealInfo.addEventListener(\"click\", function () {\r\n      showMealInfo(mealData);\r\n    });\r\n  });\r\n}\r\n\r\nfunction getMealsFromLS() {\r\n  const mealIds = JSON.parse(localStorage.getItem(\"mealIds\"));\r\n\r\n  return mealIds === null ? [] : mealIds;\r\n}\r\n\r\nfunction addMealTolS(mealId) {\r\n  const mealIds = getMealsFromLS();\r\n  console.log(mealIds);\r\n\r\n  localStorage.setItem(\"mealIds\", JSON.stringify([...mealIds, mealId]));\r\n}\r\n\r\nfunction removeMealLS(mealId) {\r\n  const mealIds = getMealsFromLS();\r\n  console.log(mealIds);\r\n\r\n  localStorage.setItem(\r\n    \"mealIds\",\r\n    JSON.stringify(mealIds.filter((id) => id !== mealId))\r\n  );\r\n}\r\n\r\nfunction addFavMeal(mealData) {\r\n  const favMeals = document.createElement(\"li\");\r\n\r\n  favMeals.innerHTML = `\r\n  \r\n    <img class=\"fav-meal\"\r\n      src=\"${mealData.strMealThumb}\"\r\n      alt=\"${mealData.strMeal}\"\r\n    /><span>${mealData.strMeal}</span>\r\n    <button class=\"clear\"><i class=\"fa-solid fa-rectangle-xmark\"></i></button>\r\n  `;\r\n\r\n  const btn = favMeals.querySelector(\".clear\");\r\n\r\n  btn.addEventListener(\"click\", function () {\r\n    removeMealLS(mealData.idMeal);\r\n\r\n    fetchFavMeals();\r\n  });\r\n\r\n  favMeals.addEventListener(\"click\", function (e) {\r\n    const btn = e.target.closest(\".fav-meal\");\r\n\r\n    if (!btn) return;\r\n    showMealInfo(mealData);\r\n  });\r\n\r\n  favContainer.appendChild(favMeals);\r\n}\r\n\r\nasync function fetchFavMeals() {\r\n  favContainer.innerHTML = \"\";\r\n  const mealIds = getMealsFromLS();\r\n  console.log(mealIds);\r\n  // const meals = [];\r\n\r\n  for (let i = 0; i < mealIds.length; i++) {\r\n    const mealId = mealIds[i];\r\n\r\n    const meal = await getMealById(mealId);\r\n\r\n    addFavMeal(meal);\r\n  }\r\n}\r\n\r\nfunction showMealInfo(mealData) {\r\n  mealInfoEl.innerHTML = \"\";\r\n\r\n  const mealEl = document.createElement(\"div\");\r\n\r\n  const ingredients = [];\r\n\r\n  for (let i = 1; i <= 20; i++) {\r\n    if (mealData[\"strIngredient\" + i]) {\r\n      ingredients.push(\r\n        `${mealData[\"strIngredient\" + i]} - ${mealData[\"strMeasure\" + i]}`\r\n      );\r\n    } else {\r\n      break;\r\n    }\r\n  }\r\n\r\n  mealEl.innerHTML = `\r\n          <h2>${mealData.strMeal}</h2>\r\n          <img\r\n            src=\"${mealData.strMealThumb}\"\r\n            alt=\"\"\r\n          />\r\n          <p>\r\n            ${mealData.strInstructions}\r\n          </p>\r\n          <h3>ingredients:</h3>\r\n          <ul>\r\n              ${ingredients.map((ing) => `<li>${ing}</li>`).join(\"\")}\r\n              \r\n          </ul>\r\n        `;\r\n\r\n  mealInfoEl.appendChild(mealEl);\r\n\r\n  mealPopup.classList.remove(\"hidden\");\r\n}\r\n\r\nsearchElement.addEventListener(\"submit\", async function (e) {\r\n  e.preventDefault();\r\n  // Clean container\r\n\r\n  mealsEl.innerHTML = \"\";\r\n\r\n  const query = searchEL.value;\r\n\r\n  const meals = await getMealByName(query);\r\n\r\n  if (meals) {\r\n    meals.forEach((meal) => {\r\n      addMeal(meal);\r\n      searchEL.value = \"\";\r\n    });\r\n  }\r\n});\r\n\r\npopupContainer.addEventListener(\"click\", function (e) {\r\n  const btn = e.target.closest(\".close-popup\");\r\n\r\n  if (!btn) return;\r\n\r\n  mealPopup.classList.add(\"hidden\");\r\n});\r\n"],"names":["mealsEl","document","querySelector","favContainer","getElementById","heartBtn","searchEL","searchBtn","closePopup","mealInfoEl","mealPopup","searchElement","popupContainer","getRandomMeal","async","response","fetch","randomData","json","meals","console","log","addMeal","getMealById","id","data","mealData","fetchFavMeals","getMealByName","name","random","meal","createElement","classList","add","innerHTML","strMealThumb","strMeal","appendChild","btnShowMealInfo","btn","addEventListener","e","contains","removeMealLS","idMeal","remove","addMealTolS","showMealInfo","getMealsFromLS","mealIds","JSON","parse","localStorage","getItem","mealId","setItem","stringify","filter","addFavMeal","favMeals","target","closest","i","length"],"version":3,"file":"index.32200a79.js.map"}